{% extends 'base.html' %}
{% load crispy_forms_tags %}

{% load static %}

{% block title %} {{lesson.name}} {% endblock %}


{% block content %}

<section class="text-center">
  <h2 class="mb-0 mt-5 font-weight-bold" style="color:#76B947;font-family: 'Source Code Pro', monospace;">Lecture
    Details</h2>
  <div class="row d-flex justify-content-center mb-3">
    <blockquote class="blockquote mt-0">
      <footer class="blockquote-footer">Created on {{lesson.created_at}} by <cite
          title="Source Title">{{lesson.created_by}}</cite></footer>
    </blockquote>
  </div>
  <!-- video -->

  <div class="row d-flex justify-content-center mb-3">
    <div id="player-overlay">
      <video controls>
        {% if lesson.video.url %}
        <source src="{{lesson.video.url}}" type="video/mp4">
        {% else %}
        <source src="#" type="video/mp4">
        {%endif%}

      </video>
    </div>
  </div>

  <!-- download cards -->
  <div class="row d-flex justify-content-center mb-3 mt-3">
    <!-- download presentations -->
    <div class="col-md-4 mb-4 mt-4">
      <div class="card box-shadow-hover">
        <div class="card-body">
          <h5 class="card-title">Download Presentations</h5>
          {% if lesson.ppt %}
          <p class="card-text">Download presentations from the lecture</p>
          <a href="{{lesson.ppt.url}}" download>
            <button type="button" class="button-les"><span>Get Files</span></button>
          </a>
          {% else %}
          <p class="card-text"> No PPT available</p>
          {% endif %}

        </div>
      </div>
    </div>
    <!-- download notes -->
    <div class="col-md-4 mb-4 mt-4">
      <div class="card box-shadow-hover">
        <div class="card-body">
          <h5 class="card-title">View or Notes</h5>
          {% if lesson.notes %}
          <p class="card-text">View notes from the lecture</p>
          <a href="{{lesson.notes.url}}">
            <button type="button" class="button-les"><span>My notes</span></button>
          </a>
         
          {% else %}
          <p class="card-text">Notes not available</p>
          {%endif%}

        </div>
      </div>
    </div>
    <!-- download video -->
    <div class="col-md-4 mb-4 mt-4">
      <div class="card box-shadow-hover">
        <div class="card-body">
          <h5 class="card-title">Download Video</h5>
          <p class="card-text">Download Video from the lecture</p>
        {% if lesson.video.url %}

          <a href="{{lesson.video.url}}" download>
            <button type="button" class="button-les"><span>Get Files</span></button>
        
          </a>
          {% else %}
          <p class="card-text">No video available</p>
          {%endif%}
        </div>
      </div>
    </div>
  </div>
  <!-- update and delete button -->
  <div class="row d-flex justify-content-center mb-3 mt-3">
    {% if user.userprofileinfo.user_type == 'teacher' or user.is_superuser %}
    <div class="col-md-6 mb-3 text-center">
      <a href="{% url 'curriculum:lesson-update' subject_id=subject.id lesson_id=lesson.id %}" class="btn btn-warning btn-lg mr-4 btn-block">Update Lesson</a>
    </div>
    <div class="col-md-6">
      <a href="" class="btn btn-danger btn-lg mr-4 btn-block"> Delete Lesson </a>
    </div>
    {% endif %}
  </div>
</section>

<hr class="my-5" style="color:#76B947;">
<section>
  <!-- <h2 class="mb-4 mt-5 font-weight-bold" style="color:#ff5722;">Questions And Queries</h2>
  <h4 class="mt-2 font-weight-bold" style="color:#ff5722;">Post your comment or question below:</h4>
  <br><br>
  <div class="container row">
    <div class="col-md-6">
      <form method="post">
        <div class="form-group">
          {% csrf_token %}
          {{form|crispy}}
          <input type="submit" name="form" value="Add Comment" class="btn btn-primary btn-sm">
        </div>
      </form>
    </div>
  </div> -->
  <!-- <div class="row">
    {% for comment in lesson.comments.all %}
    <div class="col-md-8 mt-2 mb-2">
      <div class="media border p-3">
        <img src="{% static 'Images/user_avatar.png' %}" alt="John Doe" class="mr-3 mt-3 rounded-circle"
          style="width:60px;">
        <div class="media-body">
          <h4>{{comment.author}} <small><i>Posted on {{comment.date_added}}</i></small></h4>
          <p>{{comment.body}}</p>
          {% for reply in comment.replies.all %}
          <div class="media p-3">
            <img src="{% static 'Images/user_avatar.png' %}" alt="Jane Doe" class="mr-3 mt-3 rounded-circle"
              style="width:45px;">
            <div class="media-body">
              <h5>{{reply.author}} <small><i>Posted on {{reply.date_added}}</i></small></h5>
              <p>{{reply.reply_body}}</p>
            </div>
          </div>
          {% endfor %}
          form to post reply
          <form method="post">
            <input type="hidden" name="comment.id" value="{{comment.id}}">
            <input type="hidden" name="comment.comm_name" value="{{comment.comm_name}}">
            {% csrf_token %}
            {{form2.as_p}}
            <input type="submit" name="form2" value="Add Reply" class="btn btn-warning btn-sm">
          </form>
        </div>
      </div>
    </div>
    {% endfor %}
  </div> -->
</section>

{%endblock%}